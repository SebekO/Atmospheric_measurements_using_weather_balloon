/*!
 * @file basicTestI2C.ino
 * @brief DFRobot's Temperature、Pressure、Humidity and Approx altitude
 * @n [Get the module here]
 * @n This example read the Temperature、Pressure、Humidity and Altitude from BME280, and then print them
 * @n [Connection and Diagram]
 *
 * @copyright	[DFRobot](http://www.dfrobot.com), 2016
 * @copyright	GNU Lesser General Public License
 *
 * @author [yangyang]
 * @version  V1.0
 * @date  2017-7-5
 */

#include <DFRobot_BME280.h>

#define SEA_LEVEL_PRESSURE	1013.25f
#define BME_CS 10

DFRobot_BME280 bme; //I2C

float temp, pa, hum, alt;

void setup() {
    Serial.begin(115200);
    Serial4.begin(57600);
    
    // I2c default address is 0x76, if the need to change please modify bme.begin(Addr)
    if (!bme.begin(0x77)) {
        Serial.println("No sensor device found, check line or address!");
        while (1);
    }
    
    Serial.println("-- BME280 DEMO --");
}


void loop() { 
	temp = bme.temperatureValue();
	pa = bme.pressureValue();
	hum = bme.humidityValue();
	alt = bme.altitudeValue(SEA_LEVEL_PRESSURE);
	
	Serial.print("BME280 ");
	Serial.print(temp);
	Serial.print(" C");
	
	Serial.print(" ");
	Serial.print(pa);
	Serial.print(" Pa");
	
	Serial.print(" ");
	Serial.print(hum);
	Serial.print(" %");
	
	Serial.print(" ");
	Serial.print(alt);
	Serial.println(" m");
 
   Serial4.print("BME280 ");
  Serial4.print(temp);
  Serial4.print(" C");
  
  Serial4.print(" ");
  Serial4.print(pa);
  Serial4.print(" Pa");
  
  Serial4.print(" ");
  Serial4.print(hum);
  Serial4.print(" %");
  
  Serial4.print(" ");
  Serial4.print(alt);
  Serial4.println(" m");
	
	delay(1000);
}
